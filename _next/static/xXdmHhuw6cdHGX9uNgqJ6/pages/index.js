(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{110:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(11),o=a.n(l),c=a(6),i=a.n(c),s=a(4),u=a(1);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){b(e,t,a[t])})}return e}function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var y=function(e){function t(e){var a,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=g(t).call(this,e),a=!r||"object"!==m(r)&&"function"!=typeof r?E(n):r,b(E(E(a)),"changeAvatar",function(e){var t=a.props.data.user;t.logado||a.props.setData({user:f({},t,{avatar:e})})}),b(E(E(a)),"changeName",function(e){var t=e.target.value;a.setState({name:t})}),b(E(E(a)),"play",function(e){a._checkData()&&a.props.joinGame(e)});var l=a.props,o=l.rooms,c=l.ios,i=l.data,s=i.user,u=i.languages;return a.state={name:s.nome,rooms:o,ios:c,playActive:u.find(function(e){return e.id==s.language}).subjects.length},a}var a,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r.a.Component),a=t,(n=[{key:"_checkData",value:function(){var e=this.state.name,t=this.props.data.user;return e.length>=2&&e.length<=18?(this.props.setData({user:f({},t,{nome:e})}),!0):(this.props.popup(s.a.ALERT,{text:u.j.invalidNick,icon:"iconErro"}),!1)}},{key:"nextScreen",value:function(e){if(this._checkData()){var t=this.state.name,a=this.props.data.user,n=a.avatar,r=a.language;i.a.post("/req/user",{name:t,avatar:n,language:r}),o.a.push(e)}}}])&&p(a.prototype,n),l&&p(a,l),t}();t.a=y},38:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e){return r.a.createElement("div",{className:e.className,style:{backgroundImage:"url(/static/images/subjects/".concat(e.id,".svg)")}},e.children)}},656:function(e,t,a){__NEXT_REGISTER_PAGE("/",function(){return e.exports=a(657),{page:e.exports.default}})},657:function(e,t,a){"use strict";a.r(t);var n=a(14),r=a.n(n),l=a(0),o=a.n(l),c=a(15),i=a.n(c),s=a(29),u=a(110),m=a(23),f=a(25),p=a(4),g=a(24),h=a(38),E=a(7),b=a(6),y=a.n(b),v=a(3),d=a.n(v),k=a(1);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t,a,n,r,l,o){try{var c=e[l](o),i=c.value}catch(e){return void a(e)}c.done?t(i):Promise.resolve(i).then(n,r)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t,a){return t&&j(e.prototype,t),a&&j(e,a),e}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var S=function(e){var t,a;function n(e){var t,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),a=this,r=w(n).call(this,e),t=!r||"object"!==N(r)&&"function"!=typeof r?T(a):r,P(T(T(t)),"handleLanguage",function(e){var a=e.target.value,n=t.props.data,r=n.user,l=n.languages;t.props.setData({user:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){P(e,t,a[t])})}return e}({},r,{language:a})}),t.setState({playActive:l.find(function(e){return e.id==a}).subjects.length})}),t._source=y.a.CancelToken.source(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(n,u["a"]),_(n,null,[{key:"getInitialProps",value:(t=r.a.mark(function e(t){var a,n,l,o,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.req,n=t.query,!(l=t.data).user.logado){e.next=11;break}if(!a){e.next=6;break}o=n.rooms,e.next=11;break;case 6:if(!l.user.logado){e.next=11;break}return e.next=9,y.a.get("/req/lastRooms",{responseType:"json"});case 9:c=e.sent,o=c.data;case 11:return e.abrupt("return",{rooms:o});case 12:case"end":return e.stop()}},e,this)}),a=function(){var e=this,a=arguments;return new Promise(function(n,r){var l=t.apply(e,a);function o(e){O(l,n,r,o,c,"next",e)}function c(e){O(l,n,r,o,c,"throw",e)}o(void 0)})},function(e){return a.apply(this,arguments)})}]),_(n,[{key:"componentDidMount",value:function(){var e=this;this.props.data.user.logado&&(this._timer=setTimeout(function(){return e.fetch()},5e3)),this.props.popup(p.a.CLOSE_LOADING)}},{key:"componentWillUnmount",value:function(){this._timer&&clearTimeout(this._timer),this._source.cancel()}},{key:"fetch",value:function(){var e=this;y.a.get("/req/lastRooms",{responseType:"json",cancelToken:this._source.token}).then(function(t){t.data&&e.setState({rooms:t.data}),e._timer=setTimeout(function(){return e.fetch()},5e3)}).catch(function(){e._timer=setTimeout(function(){return e.fetch()},5e3)})}},{key:"playHome",value:function(){this.state.playActive&&this.play()}},{key:"render",value:function(){var e=this,t=this.props.data,a=t.user,n=a.logado,r=a.avatar,l=a.language,c=t.subjects,u=t.languages,m=this.props.popup,b=this.state,y=b.name,v=b.rooms,N=b.playActive;if(n){var O=[];if(v.length<4)for(var w=0;w<4-v.length;w++)O.push(o.a.createElement("li",{className:"empty",key:w},o.a.createElement("div",{className:"figure"}),o.a.createElement("div",{className:"infosRoom"},o.a.createElement("h5",null),o.a.createElement("div",null,o.a.createElement("span",null),o.a.createElement("span",null),o.a.createElement("span",null)))));return o.a.createElement(s.a,{home:!0,fixed:!0},o.a.createElement(i.a,null,o.a.createElement("title",null,k.k.pageTitle),o.a.createElement("meta",{name:"description",content:k.k.description})),o.a.createElement("div",{className:"title mobileHide"},o.a.createElement("h2",null,k.k.title)),o.a.createElement("div",{className:"content home"},o.a.createElement("div",{className:"logged"},o.a.createElement("div",{className:"form"},o.a.createElement("h3",null,k.k.subtitleQuickPlay),o.a.createElement(g.a,{url:r}),o.a.createElement("a",{href:"/logout?home",className:"exit ic-logout"},o.a.createElement("p",null,k.k.logout)),o.a.createElement("div",{className:"containerForm"},o.a.createElement("div",{className:"fieldset nick"},o.a.createElement("span",null,k.k.nick),o.a.createElement("label",{className:"text"},o.a.createElement("input",{type:"text",value:y,onChange:this.changeName,maxLength:"18"}))),o.a.createElement("div",{className:"fieldset lang"},o.a.createElement("span",null,k.k.language),o.a.createElement("label",{className:"select"},o.a.createElement("select",{name:"language",value:l,onChange:this.handleLanguage},o.a.createElement("optgroup",{label:k.k.themesAvailable},u.filter(function(e){return e.subjects.length}).map(function(e){return o.a.createElement("option",{value:e.id,key:"lang"+e.id},e.name)})),o.a.createElement("optgroup",{label:k.k.withoutThemes},u.filter(function(e){return!e.subjects.length}).map(function(e){return o.a.createElement("option",{value:e.id,key:"lang"+e.id},e.name)}))))))),o.a.createElement("div",{className:"actions"},o.a.createElement("button",{className:"btBlueBig ic-rooms",onClick:function(){return e.nextScreen("/rooms")}},o.a.createElement("strong",null,k.k.rooms)),o.a.createElement("button",{className:"btYellowBig ic-playHome",onClick:function(){return e.playHome()},disabled:!N},o.a.createElement("strong",null,k.k.play),o.a.createElement("span",null,k.k.notOfficialTheme1,o.a.createElement("br",null),k.k.notOfficialTheme2)))),o.a.createElement("div",{className:"lastRooms"},o.a.createElement("h3",null,k.k.lastRooms),o.a.createElement("div",null,o.a.createElement(f.a,null,v.length>0?o.a.createElement("ul",null,v.map(function(t){return o.a.createElement("li",{key:t.id,className:d()({official:t.official,bgEmptyRoom:0==t.quant})},o.a.createElement(h.a,{className:"figure",id:t.subject}),o.a.createElement("div",{className:"infosRoom"},o.a.createElement("h5",null,o.a.createElement("strong",null,Object(E.a)(c,t.subject)),"#",t.id.substr(1),t.official&&o.a.createElement("i",{className:"official"})),o.a.createElement("div",null,o.a.createElement("span",{className:d()("ic-user",{emptyRoom:0==t.quant,full:t.quant>=t.max})},t.quant+"/"+t.max),o.a.createElement("span",{className:"ic-lang"},Object(E.a)(u,t.lang,"iso")),o.a.createElement("span",{className:"ic-trophy"},t.points+"/"+t.goal))),o.a.createElement("span",{className:"ic-playHome",onClick:function(){return e.play(t.code)}},k.k.play))}),O):o.a.createElement("div",{className:"visibleRoom"},o.a.createElement("div",{className:"figure"}),o.a.createElement("p",null,k.k.visibleRoom)))))))}return o.a.createElement(s.a,{home:!0,fixed:!0},o.a.createElement(i.a,null,o.a.createElement("title",null,k.k.pageTitle),o.a.createElement("meta",{name:"description",content:k.k.description})),o.a.createElement("div",{className:"title mobileHide"},o.a.createElement("h2",null,k.k.title)),o.a.createElement("div",{className:"content home"},o.a.createElement("div",{className:"anonymus"},o.a.createElement("div",{className:"form"},o.a.createElement("h3",null,k.k.subtitleQuickPlay),o.a.createElement(g.a,{type:r},o.a.createElement("button",{className:"selectAvatar",onClick:function(){return m(p.a.AVATAR,{avatar:r,cb:e.changeAvatar})}})),o.a.createElement("div",{className:"containerForm"},o.a.createElement("div",{className:"fieldset nick"},o.a.createElement("span",null,k.k.nick),o.a.createElement("label",{className:"text"},o.a.createElement("input",{type:"text",value:y,onChange:this.changeName,maxLength:"18"}))),o.a.createElement("div",{className:"fieldset lang"},o.a.createElement("span",null,k.k.language),o.a.createElement("label",{className:"select"},o.a.createElement("select",{name:"language",value:l,onChange:this.handleLanguage},o.a.createElement("optgroup",{label:k.k.themesAvailable},u.filter(function(e){return e.subjects.length}).map(function(e){return o.a.createElement("option",{value:e.id,key:"lang"+e.id},e.name)})),o.a.createElement("optgroup",{label:k.k.withoutThemes},u.filter(function(e){return!e.subjects.length}).map(function(e){return o.a.createElement("option",{value:e.id,key:"lang"+e.id},e.name)}))))))),o.a.createElement("div",{className:"actions"},o.a.createElement("button",{className:"btBlueBig ic-rooms",onClick:function(){return e.nextScreen("/rooms")}},o.a.createElement("strong",null,k.k.rooms)),o.a.createElement("button",{className:"btYellowBig ic-playHome",onClick:function(){return e.playHome()},disabled:!N},o.a.createElement("strong",null,k.k.play),o.a.createElement("span",null,k.k.notOfficialTheme1,o.a.createElement("br",null),k.k.notOfficialTheme2)))),o.a.createElement("div",{className:"or"},o.a.createElement("span",null,k.k.or)),o.a.createElement("div",{className:"login"},o.a.createElement("h3",null,k.k.subtitleLogin),o.a.createElement("div",null,o.a.createElement("span",null,o.a.createElement("p",null,k.k.newThemes)),o.a.createElement("span",null,o.a.createElement("p",null,k.k.favoriteRooms)),o.a.createElement("span",null,o.a.createElement("p",null,k.k.chatToPlayers))),o.a.createElement("a",{className:"twitter ic-twitter",href:"/twitter"},o.a.createElement("span",null,k.k.loginWith,o.a.createElement("strong",null,k.k.twitter))),o.a.createElement("a",{className:"facebook ic-facebook",href:"/facebook"},o.a.createElement("span",null,k.k.loginWith,o.a.createElement("strong",null,k.k.facebook))),o.a.createElement("a",{className:"google ic-google",href:"/google"},o.a.createElement("span",null,k.k.loginWith,o.a.createElement("strong",null,k.k.google))))))}}]),n}();t.default=Object(m.a)(S)}},[[656,1,0]]]);